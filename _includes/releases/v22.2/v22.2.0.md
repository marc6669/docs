## v22.2.0

Release Date: December 5, 2022

With the release of CockroachDB v22.2, we've made a variety of management, performance, security, and compatibility improvements. Check out a [summary of the most significant user-facing changes](#v22-2-0-feature-summary) and then [upgrade to CockroachDB v22.2](../v22.2/upgrade-cockroach-version.html). For a release announcement with further focus on key features, see the [v22.2 blog post](LINK HERE).

ADD BLURB FROM PRODUCT MARKETING

{% include releases/release-downloads-docker-image.md release=include.release %}

<h3 id="v22-2-0-{{ site.data.products.db | downcase | replace: " ", "-" }}">{{ site.data.products.db }}</h3>

- <a href="https://cockroachlabs.cloud/signup?referralId=docs_crdb_release_notes" rel="noopener" target="_blank">Get a free v22.2 cluster on {{ site.data.products.serverless }}</a>.
- Learn about recent updates to {{ site.data.products.db }} in the [{{ site.data.products.db }} Release Notes](cloud.html).

<h3 id="v22-2-0-feature-summary">Feature summary</h3>

This section summarizes the most significant user-facing changes in v22.2.0. For a complete list of features and changes, including bug fixes and performance improvements, see the [release notes](index.html#testing-releases) for previous testing releases. You can also search for [what's new in v22.2 in our docs](../search.html?query=new%20in%20v22.2).

{{site.data.alerts.callout_info}}
"Core" features are freely available in the core version of CockroachDB and do not require an enterprise license. "Enterprise" features require an [enterprise license](https://www.cockroachlabs.com/get-cockroachdb/enterprise/). [{{ site.data.products.db }} clusters](https://cockroachlabs.cloud/) include all enterprise features. You can also use [`cockroach demo`](../v22.2/cockroach-demo.html) to test enterprise features in a local, temporary cluster.
{{site.data.alerts.end}}

- [SQL](#v22-2-0-sql)
- [Recovery and I/O](#v22-2-0-recovery-and-i-o)
- [Database operations](#v22-2-0-database-operations)
- [Backward-incompatible changes](#v22-2-0-backward-incompatible-changes)
- [Deprecations](#v22-2-0-deprecations)
- [Known limitations](#v22-2-0-known-limitations)
- [Education](#v22-2-0-education)

<style>
    table td:first-child {
        min-width: 100px !important;
    }
    table td:nth-child(2) {
        min-width: 200px !important;
    }
</style>

<h4 id="v22-2-0-sql">SQL</h4>

Version    | Feature                        | Description
-----------+--------------------------------+------------------------------


<h4 id="v22-2-0-developer-experience">Developer Experience</h4>

Version    | Feature                        | Description
-----------+--------------------------------+------------------------------

<h4 id="v22-2-0-recovery-and-i-o">Recovery and I/O</h4>

Version    | Feature                        | Description
-----------+--------------------------------+------------------------------


<h4 id="v22-2-0-database-operations">Database operations</h4>

Version    | Feature                        | Description
-----------+--------------------------------+------------------------------


<h4 id="v22-2-0-security">Security</h4>

Version    | Feature                        | Description
-----------+--------------------------------+------------------------------


<h4 id="v22-2-0-backward-incompatible-changes">Backward-incompatible changes</h4>

Before [upgrading to CockroachDB v22.2](../v22.2/upgrade-cockroach-version.html), be sure to review the following backward-incompatible changes and adjust your deployment as necessary.

{% include ../v22.2/backward-incompatible/alpha.1.md %}

<h4 id="v22-2-0-deprecations">Deprecations</h4>

- `debug zip`'s `--redact-logs` flag has been deprecated in favor of the `--redact` flag, which applies to a broader scope than just logs, and also includes logs. The new `--redact` flag triggers the redaction of all sensitive data in debug zip bundles, with the exception of range keys. Range keys must remain unredacted because they are essential to support CockroachDB. The `--redact-logs` flag is still available but displays a redaction warning and is interpreted as `--redact` instead. [#88266][#88266]
- Using a single TCP port listener for both RPC (node-node) and SQL client connections is now deprecated. This capability **will be removed** in the next version of CockroachDB. Instead, make one of the following configuration changes to your CockroachDB deployment:
    - Preferred: keep port `26257` for SQL, and allocate a new port, e.g., `26357`, for node-node RPC connections. For example, you might configure a node with the flags `--listen-addr=:26357 --sql-addr=:26257`, where subsequent nodes seeking to join would then use the flag `--join=othernode:26357,othernode:26257`. This will become the default configuration in the next version of CockroachDB. When using this mode of operation, care should be taken to use a `--join` flag that includes both the previous and new port numbers for other nodes, so that no network partition occurs during the upgrade.
    - Optional: keep port `26257` for RPC, and allocate a new port, e.g., `26357`, for SQL connections. For example, you might configure a node with the flags `--listen-addr=:26257 --sql-addr=:26357`. When using this mode of operation, the `--join` flags do not need to be modified. However, SQL client apps or the SQL load balancer configuration (when in use) must be updated to use the new SQL port number. [#85671][#85671]
- Previously, [`BACKUP`](../v22.2/backup.html) allowed the user to specify a custom subdirectory name for their backups via `BACKUP .. INTO {subdir} IN {collectionURI}`. This is no longer supported. Users can only create a full backup via `BACKUP ... INTO {collectionURI}` or an incremental backup on the latest full backup in their collection via `BACKUP ... INTO LATEST IN {collectionURI}`. This deprecation also removes the need to address a bug in `SHOW BACKUPS IN`, which cannot display user-defined subdirectories. [#79447][#79447]
- The `debug unsafe-remove-dead-replicas` CLI command has been deprecated, and will be removed in v23.1. Users should use the new `debug recover` set of commands instead. [#88765][#88765]
- The `GRANT` privilege has been removed and replaced by the more granular [`WITH GRANT OPTION`](../v22.2/grant.html#grant-privileges-with-the-option-to-grant-to-others), which provides control over which privileges are allowed to be granted. [#81310][#81310]

<h4 id="v22-2-0-known-limitations">Known limitations</h4>

For information about new and unresolved limitations in CockroachDB v22.2, with suggested workarounds where applicable, see [Known Limitations](../v22.2/known-limitations.html).

<h4 id="v22-2-0-education">Education</h4>

Area                 | Topic                     | Description
---------------------+---------------------------+------------
